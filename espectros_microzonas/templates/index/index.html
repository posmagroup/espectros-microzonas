{% extends 'base.html' %}

{% block extracss %}
<style>
    #map {
        width: 600px;
        height: 450px;
        border: 1px solid black;
    }
</style>
{% endblock %}

{% block extrajs %}
<script src="http://openlayers.org/dev/OpenLayers.js"></script>
<script>
    $(document).ready(function(){
        OpenLayers.IMAGE_RELOAD_ATTEMPTS = 5;
        format = 'image/png';

        var bounds = new OpenLayers.Bounds(
                701278.4525937159, 1143737.188069312,
                752974.5281932829, 1169040.7596747405
        );

        var options = {
            controls: [],
            maxExtent: bounds,
            maxResolution: 201.93779531080872,
            projection: "EPSG:2202",
            units: 'm'
        };

        var map = new OpenLayers.Map('map', options);

        var wms_3 = new OpenLayers.Layer.WMS( "Laderas",
                "http://localhost:8080/geoserver/wms",
                {layers: 'microzonas:Microzonas_Laderas', format: "image/png"},
                {isBaseLayer: false});


        var wms_2 = new OpenLayers.Layer.WMS( "Sedimentos",
                "http://localhost:8080/geoserver/wms",
                {layers: 'microzonas:Microzonas_Sedimentos',  format: "image/png"},
                {isBaseLayer: false});

        var wms_1 = new OpenLayers.Layer.WMS( "Amenaza General",
                "http://localhost:8080/geoserver/wms",
                {layers: 'microzonas:Microzonas_Amenaza_General',  format: "image/png"}
        );

        map.addLayers([wms_1, wms_2, wms_3]);

        map.addControl(new OpenLayers.Control.LayerSwitcher());
        map.addControl(new OpenLayers.Control.Navigation());
        map.addControl(new OpenLayers.Control.Scale($('scale')));
        map.addControl(new OpenLayers.Control.MousePosition({element: $('location')}));
        map.zoomToExtent(bounds);
    });
</script>
{% endblock %}

{% block content %}
<div id="map"></div>
<div id="wrapper">
    <div id="location"></div>
    <div id="scale">
    </div>
</div>
{% endblock %}
